<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Chiron+Sung+HK:ital,wght@0,200..900;1,200..900&family=Great+Vibes&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Serif+Telugu:wght@100..900&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Six Plus One</title>
        <link rel="icon" href="/favicon.jpg" type="image/x-icon">
</head>
<body>
    <!-- Slick Preloader -->
    <div id="preloader">
        <svg id="preloader-svg" viewbox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
            <!-- The text paths will be animated -->
            <text class="preloader-text" id="text-six" x="25%" y="50%" dy=".35em" text-anchor="middle">Six</text>
            <text class="preloader-text" id="text-plus" x="50%" y="50%" dy=".35em" text-anchor="middle">Plus</text>
            <text class="preloader-text preloader-text-accent" id="text-one" x="75%" y="50%" dy=".35em" text-anchor="middle">One</text>
        </svg>
    </div>
    <!-- End Preloader -->

    <aside class="sidebar-nav">
        <div class="sidebar-logo">
            <a href="index.html">Six Plus One</a>
        </div>
        <div class="sidebar-links">
            <a href="index.html" class="sidebar-link"><span class="link-icon"></span><span class="link-text">Home</span></a>
            <a href="#about-book-section" class="sidebar-link"><span class="link-icon"></span><span class="link-text">About</span></a>
            <a href="#" id="contact-btn-sidebar" class="sidebar-link"><span class="link-icon"></span><span class="link-text">Contact</span></a>
        </div>
        <div class="sidebar-toggle">
            <button id="sidebar-toggle-btn" class="toggle-btn">«</button>
        </div>
    </aside>

    <div class="main-content">
        <div class="mobile-header">
            <button class="mobile-menu-toggle" id="mobile-menu-toggle-btn">
                <span></span><span></span><span></span>
            </button>
        </div>
        <header>
            
            <div class="nav">
                <video src="https://dailycrumb.netlify.app/vid1(sixplusone).mp4" class="video1" id="zoomVideo" autoplay loop muted poster="image.png"></video>
                <a href="https://paystack.com/buy/six-plus-one" target="_blank" rel="noopener noreferrer" class="button-class button-outline launch-button">Join the Booklaunch</a>
                <h1 class="nav-title">
                    <span class="title-line">
                        <span class="white">Six Plus</span>
                    </span>
                    <span class="title-line">
                        <span class="nav-title-word-one">One</span>
                    </span>
                    <br>
                    <span class="under-title">Lessons From The Eyes Of The Storm</span>
                </h1>
    
        </div>
    </header>
    
        <main>
            <div class="rough-cont">
                <img src="rough.png" alt="" class="rough">
                <img src="rough.png" alt="" class="rough">
                <img src="rough.png" alt="" class="rough">
            </div>

            <section class="author-section">
                <div>
                    <h2 class="bold">About The Author</h2>
                    <p class="about-author">
                      Chisom Nwanoro is a survivor and advocate who weaves her faith, family, and expertise into a seamless narrative. <br>She empowers you to manage the daily realities of life with confidence and purpose!
                    </p>
                </div>
                <div>
                    <img src="profile img.jpg" alt="Chisom Nwanoro, author of Six Plus One" class="author-image">
                </div>
            </section>

            <div id="horizontal-scroll-container">
                <div class="horizontal-scroll-wrapper">
                    <section class="horizontal-panel">
                        <div class="sect2" id="about-book-section">
                             <div>
                                <img src="Thumbnail.jpg" alt="The book cover for Six Plus One" class="thumbnail">
                            </div>
                            <div>
                                <h2 class="bold">About The Book</h2>
                                <p class="about-book">
                                    Life often throws storms we never prayed for. These could be loss, failure, betrayal, or any trial that shakes the very foundation of who we are. In <strong>Six Plus One: Lessons from the Eye of the Storm</strong>, author Chisom Nwanoro offers a profoundly insightful guide to navigating these moments.
                                </p>
                                <div class="read-more-content" id="about-book-more">
                                    <p class="about-book">
                                        In this deeply personal and universally relatable book, Chisom Nwanoro shares essential lessons gleaned from her own crucible of life experience. She tackles the crushing weight of societal expectations, the power of vulnerability, and the path to finding strength in adversity.
                                    </p>
                                </div>
                                <button class="read-more-btn" id="read-more-about-btn">Read More</button>
                                <button class="button-class" id="buy-now-btn" style="margin-top: 1rem;">Buy Now</button>
                            </div>
                        </div>
                    </section>
                    <section class="horizontal-panel">
                        <div class="sect3 sect2" id="project-r4k-section">
                            <div>
                                <img src="Thumbnail2.jpg" alt="The book cover for Six Plus One" class="thumbnail2 thumbnail">
                            </div>
                            <div>
                                <h2 class="bold">Project R4K</h2>
                                <p class="about-book about-book--project">
                                    Imagine a young woman consumed by shattered hopes and profound psychological trauma after the death of her husband. She endures emotional trauma, societal stigmatization, financial pressure, and more. This crisis impacts about 15 million widows in Nigeria, which is why we are launching <strong>Project R4K (Resilience 4,000)</strong> to change this narrative.
                                </p>
                                <div class="read-more-content" id="project-r4k-more">
                                    <p class="about-book about-book--project">
                                        Our mission is urgent: to equip 4,000 widows with a powerful guide—<strong>Six Plus One: Lessons from the Eyes of the Storm</strong>. This book is a survival blueprint written by a young widow, packed with critical, real-life nuggets and insights designed to pull anyone out of the emotional abyss and help them lead a purposeful, fulfilling life. Your donation is direct and transformative. Help us deliver resilience and rebuild lives.
                                    </p>
                                </div>
                                <button class="read-more-btn" id="read-more-r4k-btn">Read More</button>
                                <button class="button-class" style="margin-top: 1rem;"><a href="https://paystack.com/buy/six-plus-one">Donate Now</a></button>
                          </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <!-- Contact Section -->

        <!-- Purchase Options Modal -->
        <div class="modal-overlay" id="buy-modal-overlay">
            <div class="modal-content">
                <button class="modal-close-btn" id="modal-close-btn">&times;</button>
                <h3 class="modal-title">Choose Your Version</h3>
                <p class="modal-text">Select the format you would like to purchase.</p>
                <div class="modal-buttons">
                    <!-- NOTE: The first link is from your original button. -->
                    <a href="https://selar.com/42ji6688q5" target="_blank" rel="noopener noreferrer" class="button-class modal-button">Soft Copy</a>
                    <a href="https://paystack.com/buy/six-plus-one" target="_blank" rel="noopener noreferrer" class="button-class button-outline modal-button">Hard Copy</a>
                </div>
            </div>
        </div>

        <!-- Contact Modal -->
        <div class="modal-overlay" id="contact-modal-overlay">
            <div class="modal-content">
                <button class="modal-close-btn" id="contact-modal-close-btn">&times;</button>
                <h3 class="modal-title">Connect With Chisom</h3>
                <p class="modal-text">Find her on the following platforms:</p>
                <div class="modal-buttons">
                    <!-- Replace # with actual links -->
                    <a href="#" target="_blank" rel="noopener noreferrer" class="button-class modal-button icon-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.5 17a24.12 24.12 0 0 1 0-10C2.5 4.24 4.24 2.5 7 2.5h10c2.76 0 4.5 1.74 4.5 4.5v10c0 2.76-1.74 4.5-4.5 4.5H7c-2.76 0-4.5-1.74-4.5-4.5Z"/><path d="m10 15 5-3-5-3z"/></svg>
                        <span>YouTube</span>
                    </a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="button-class modal-button icon-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                        <span>Instagram</span>
                    </a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="button-class modal-button icon-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                        <span>Facebook</span>
                    </a>
                </div>
            </div>
        </div>

        <footer class="site-footer">
            <div class="footer-content">
                <p>Powered By: <a href="https://github.com/Komumech" target="_blank" rel="noopener noreferrer" class="footer-link">Komu Mech</a></p>
                <p>&copy; 2024 Chisom Nwanoro. All Rights Reserved.</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Register the ScrollTrigger plugin with GSAP
            gsap.registerPlugin(ScrollTrigger);

            // Add loading class to body to prevent scrolling while preloader is visible
            document.body.classList.add('loading');

            // --- Read More Button Logic ---
            const readMoreBtn = document.getElementById('read-more-r4k-btn');
            const readMoreContent = document.getElementById('project-r4k-more');

            if (readMoreBtn && readMoreContent) {
                readMoreBtn.addEventListener('click', () => {
                    const isExpanded = readMoreContent.classList.toggle('is-expanded');
                    readMoreBtn.textContent = isExpanded ? 'Read Less' : 'Read More';
                });
            }
            // -----------------------------

            // --- Read More Button Logic (About Book) ---
            const readMoreAboutBtn = document.getElementById('read-more-about-btn');
            const readMoreAboutContent = document.getElementById('about-book-more');

            if (readMoreAboutBtn && readMoreAboutContent) {
                readMoreAboutBtn.addEventListener('click', () => {
                    const isExpanded = readMoreAboutContent.classList.toggle('is-expanded');
                    readMoreAboutBtn.textContent = isExpanded ? 'Read Less' : 'Read More';
                });
            }
            // -----------------------------------------

            // --- Purchase Modal Logic ---
            const buyNowBtn = document.getElementById('buy-now-btn');
            const modalOverlay = document.getElementById('buy-modal-overlay');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            const openModal = () => modalOverlay.classList.add('is-visible');
            const closeModal = () => modalOverlay.classList.remove('is-visible');

            if (buyNowBtn) {
                buyNowBtn.addEventListener('click', openModal);
            }
            if (modalCloseBtn) {
                modalCloseBtn.addEventListener('click', closeModal);
            }
            if (modalOverlay) {
                modalOverlay.addEventListener('click', (event) => {
                    if (event.target === modalOverlay) closeModal();
                });
            }
            // --------------------------

            // --- Contact Modal Logic ---
            const contactBtnSidebar = document.getElementById('contact-btn-sidebar');
            const contactModalOverlay = document.getElementById('contact-modal-overlay');
            const contactModalCloseBtn = document.getElementById('contact-modal-close-btn');

            const openContactModal = () => contactModalOverlay.classList.add('is-visible');
            const closeContactModal = () => contactModalOverlay.classList.remove('is-visible');
            if (contactBtnSidebar) { // Targets the link in the sidebar
                contactBtnSidebar.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default link behavior
                    sidebar.classList.remove('sidebar-open'); // Close the sidebar
                    // Use a timeout to let the sidebar close animation start
                    setTimeout(openContactModal, 200); 
                });
            }
            if (contactModalCloseBtn) {
                contactModalCloseBtn.addEventListener('click', closeContactModal);
            }
            if (contactModalOverlay) {
                contactModalOverlay.addEventListener('click', (event) => {
                    if (event.target === contactModalOverlay) closeContactModal();
                });
            }
            // ---------------------------

            // --- Smooth Scroll for Sidebar Links ---
            const sidebarLinks = document.querySelectorAll('.sidebar-links a[href^="#"]');

            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault(); // Prevent the default jump

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    // Close the sidebar when a link is clicked
                    sidebar.classList.remove('sidebar-open');

                    if (targetElement) {
                        // Use a small timeout to allow the sidebar to start closing before scrolling
                        setTimeout(() => {
                            targetElement.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }, 200);
                    }
                });
            });

            // --- Enhanced Title Animation on Load ---
            const titleElements = gsap.utils.toArray(".title-line > *");
            const tl = gsap.timeline({ defaults: { ease: "power4.out" }}); // Using a stronger ease

            // Set initial state: hidden, slightly moved down, and rotated for a 3D flip effect
            gsap.set(titleElements, {
                opacity: 0,
                y: 30, // Start 30px below
                rotationX: -90, // Rotate 90 degrees on X-axis (facing away)
                transformOrigin: "center bottom" // Rotate from the bottom edge for a flip-up effect
            });

            // Animate elements into view with a stagger
            tl.to(titleElements, {
                opacity: 1,
                y: 0,
                rotationX: 0,
                duration: 1.2, // Slightly longer duration for a smoother feel
                stagger: 0.15 // Slightly less stagger for a quicker overall reveal
            });

            const video = document.getElementById('zoomVideo');
 
            // --- Sidebar Toggle Logic ---
            const sidebar = document.querySelector('.sidebar-nav');
            const desktopToggleBtn = document.getElementById('sidebar-toggle-btn');
            const mobileToggleBtn = document.getElementById('mobile-menu-toggle-btn');
            
            // The hamburger button opens the sidebar
            mobileToggleBtn.addEventListener('click', () => sidebar.classList.add('sidebar-open'));

            // The button inside the sidebar closes it
            desktopToggleBtn.addEventListener('click', () => sidebar.classList.remove('sidebar-open'));
            // --------------------------

            // --- Close sidebar on outside click ---
            document.addEventListener('click', (event) => {
                // Check if the sidebar is open
                if (sidebar.classList.contains('sidebar-open')) {
                    // If the click target is NOT the sidebar itself AND NOT the mobile toggle button
                    if (!sidebar.contains(event.target) && !mobileToggleBtn.contains(event.target)) {
                        sidebar.classList.remove('sidebar-open');
                    }
                }
            });

            // --- Intersection Observer for Animations ---
            // We exclude elements within the horizontal scroll container, as GSAP handles them.
            const animatedElements = document.querySelectorAll('.rough-cont, .author-section');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    } else {
                        entry.target.classList.remove('is-visible');
                    }
                });
            }, {
                threshold: 0.1 // Trigger when 10% of the element is visible
            });
            animatedElements.forEach(el => observer.observe(el));

            // --- Mobile Header Hide/Show on Scroll ---
            let lastScrollY = window.scrollY;
            const mobileHeader = document.querySelector('.mobile-header');

            const handleMobileHeaderScroll = () => {
              if (window.matchMedia("(max-width: 768px)").matches) {
                    const currentScrollY = window.scrollY;
                    if (currentScrollY > lastScrollY && currentScrollY > 60) {
                        // Scrolling Down
                        mobileHeader.classList.add('mobile-header--hidden');
                    } else {
                        // Scrolling Up
                        mobileHeader.classList.remove('mobile-header--hidden');
                    }
                    lastScrollY = currentScrollY;
                }
            };

            window.addEventListener('scroll', handleMobileHeaderScroll);
            // -----------------------------------------

            // --- GSAP Horizontal Scroll ---
            // Only run this on screens wider than 768px
            if (window.matchMedia("(min-width: 769px)").matches) { // --- DESKTOP ANIMATION ---
                const wrapper = document.querySelector(".horizontal-scroll-wrapper");
                const panels = gsap.utils.toArray(".horizontal-panel");

                // Set initial state for the second panel (hidden below)
                gsap.set(panels[1], { x: "100%" }); // Position off-screen to the right

                // Create the timeline
                let tl = gsap.timeline({
                    scrollTrigger: {
                        trigger: wrapper, // Now the wrapper is the trigger
                        pin: true, // Pin the trigger element itself
                        start: "top top", // Start when the top of the trigger hits the top of the viewport
                        scrub: 1, // Smooth scrubbing
                        markers: false,
                        // End after scrolling a distance equal to the height of one panel
                        end: "bottom top", // End when the bottom of the trigger hits the top of the viewport
                        invalidateOnRefresh: true // This ensures the animation resets correctly
                    }
                });

                // Animate the first panel out and the second panel in
                tl.to(panels[0], { x: "-100%", ease: "none" }, 0) // First panel slides left
                  .to(panels[1], { x: "0%", ease: "none" }, 0);    // Second panel slides in from right
            } else { // --- MOBILE (ANDROID) ANIMATION ---
                // On mobile, use the Intersection Observer for a simple fade-in
                // We target the .sect2 elements inside the panels for the animation
                document.querySelectorAll('.horizontal-panel .sect2').forEach(section => observer.observe(section));
            }

            // Refresh ScrollTrigger on window load to ensure all calculations are correct
            // CONSOLIDATED 'load' EVENT
            window.addEventListener('load', () => {
                // --- GSAP Preloader Animation ---
                // This robust approach runs after all page assets are loaded.
                const preloader = document.getElementById('preloader');
                const body = document.body;
                const words = gsap.utils.toArray('.preloader-text');

                // A simple, robust timeline for the preloader
                const preloaderTimeline = gsap.timeline({
                    // This function runs once the entire animation sequence is complete
                    onComplete: () => {
                        preloader.style.display = 'none';
                        body.classList.remove('loading');
                    }
                });

                // 1. Prepare the text for animation
                words.forEach(word => {
                    gsap.set(word, { autoAlpha: 1 }); // Make sure the word is visible
                    const length = word.getTotalLength(); // Now measure the length
                    gsap.set(word, { strokeDasharray: length, strokeDashoffset: length }); // Set up for animation
                });

                // 2. Animate the "writing" and "filling" of the text
                preloaderTimeline.fromTo(words, { strokeDashoffset: (i) => words[i].getTotalLength() }, {
                    strokeDashoffset: 0,
                    duration: 2,
                    stagger: 0.3,
                    ease: "power1.inOut"
                }).to(words, {
                    fill: (i) => words[i].classList.contains('preloader-text-accent') ? 'var(--my-orange)' : '#181818',
                    duration: 1
                }, "-=1.5"); // Start filling before the drawing is fully complete for a nice overlap

                // 3. Fade out the entire preloader
                preloaderTimeline.to(preloader, {
                    opacity: 0,
                    duration: 1,
                    ease: "power1.inOut"
                }, "+=0.5"); // Add a half-second pause after the text is filled

                ScrollTrigger.refresh();
            });

            // --- Video Fade-in Logic ---
            video.addEventListener('canplaythrough', () => {
                video.classList.add('is-loaded');
            });
            // ---------------------------
            
            // --- Configuration Variables ---
            const MAX_SCALE = 1.8; // Max zoom level
            const SCALE_RATE = 0.005; // How quickly the video scales per pixel scrolled
            // -------------------------------

            /**
             * Calculates and applies the zoom factor based on scroll position.
             */
            const applyZoom = () => {
                // Only run this animation on screens wider than 768px
                if (window.matchMedia("(min-width: 769px)").matches) {
                    // Calculate the new scale based on scroll position and rate
                    let newScale = 1 + (window.scrollY * SCALE_RATE);

                    // Clamp the scale value to prevent it from exceeding the maximum
                    newScale = Math.min(newScale, MAX_SCALE);

                    // Apply the transformation
                    video.style.transform = `scale(${newScale})`;
                } else {
                    // On mobile, ensure the video is not scaled
                    video.style.transform = 'scale(1)';
                }
            };

            let ticking = false;

            const handleScroll = () => {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        applyZoom();
                        ticking = false;
                    });
                    ticking = true;
                }
            };

            // Attach the function to the scroll event
            window.addEventListener('scroll', handleScroll);

            // Run it once on load to set the correct initial state if the user 
            // loads the page already scrolled down (e.g., refreshing the page)
            applyZoom();
        });

    </script>
</body>
</html>